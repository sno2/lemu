B main

// int fib(int x) {
//     if (x <= 2) return x;
//     return fib(x-1) + fib(x-2);
// }
fib:
    SUBIS XZR, X0, #2
    B.LE fib0

    SUBI SP, SP, #24
    STUR LR, [SP, #16]
    STUR X0, [SP, #8]

    SUBI X0, X0, #1
    BL fib
    STUR X0, [SP, #0]

    LDUR X0, [SP, #8]
    SUBI X0, X0, #2
    BL fib

    LDUR X1, [SP, #0]
    ADD X0, X0, X1

    LDUR LR, [SP, #16]
    ADDI SP, SP, #24
    B fib0

fib0:
    BR LR

main:
    // print out X2 and X0 in fib(X2) = X0 for [0, 15]
    ADDI X2, XZR, #0

loop:
    SUBIS XZR, X2, #15
    B.GT exit

    ADD X0, XZR, X2
    BL fib
    PRNT X2
    PRNT X0
    PRNL

    ADDI X2, X2, #1
    B loop

exit:

/// X2: 000000000000000000 (0)
/// X0: 000000000000000000 (0)
/// 
/// X2: 0x0000000000000001 (1)
/// X0: 0x0000000000000001 (1)
/// 
/// X2: 0x0000000000000002 (2)
/// X0: 0x0000000000000002 (2)
/// 
/// X2: 0x0000000000000003 (3)
/// X0: 0x0000000000000003 (3)
/// 
/// X2: 0x0000000000000004 (4)
/// X0: 0x0000000000000005 (5)
/// 
/// X2: 0x0000000000000005 (5)
/// X0: 0x0000000000000008 (8)
/// 
/// X2: 0x0000000000000006 (6)
/// X0: 0x000000000000000d (13)
/// 
/// X2: 0x0000000000000007 (7)
/// X0: 0x0000000000000015 (21)
/// 
/// X2: 0x0000000000000008 (8)
/// X0: 0x0000000000000022 (34)
/// 
/// X2: 0x0000000000000009 (9)
/// X0: 0x0000000000000037 (55)
/// 
/// X2: 0x000000000000000a (10)
/// X0: 0x0000000000000059 (89)
/// 
/// X2: 0x000000000000000b (11)
/// X0: 0x0000000000000090 (144)
/// 
/// X2: 0x000000000000000c (12)
/// X0: 0x00000000000000e9 (233)
/// 
/// X2: 0x000000000000000d (13)
/// X0: 0x0000000000000179 (377)
/// 
/// X2: 0x000000000000000e (14)
/// X0: 0x0000000000000262 (610)
/// 
/// X2: 0x000000000000000f (15)
/// X0: 0x00000000000003db (987)
/// 
